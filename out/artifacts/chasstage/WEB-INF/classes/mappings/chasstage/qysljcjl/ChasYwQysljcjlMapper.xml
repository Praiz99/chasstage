<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wckj.chasstage.modules.qysljcjl.dao.ChasYwQysljcjlMapper">
  <resultMap id="BaseResultMap" type="com.wckj.chasstage.modules.qysljcjl.entity.ChasYwQysljcjl">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 09 13:31:05 CST 2023.
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="isdel" jdbcType="SMALLINT" property="isdel" />
    <result column="data_flag" jdbcType="VARCHAR" property="dataFlag" />
    <result column="lrr_sfzh" jdbcType="VARCHAR" property="lrrSfzh" />
    <result column="lrsj" jdbcType="TIMESTAMP" property="lrsj" />
    <result column="xgr_sfzh" jdbcType="VARCHAR" property="xgrSfzh" />
    <result column="xgsj" jdbcType="TIMESTAMP" property="xgsj" />
    <result column="baqid" jdbcType="VARCHAR" property="baqid" />
    <result column="baqmc" jdbcType="VARCHAR" property="baqmc" />
    <result column="dwdm" jdbcType="VARCHAR" property="dwdm" />
    <result column="dwxtbh" jdbcType="VARCHAR" property="dwxtbh" />
    <result column="zt" jdbcType="VARCHAR" property="zt" />
    <result column="rylx" jdbcType="VARCHAR" property="rylx" />
    <result column="qylx" jdbcType="VARCHAR" property="qylx" />
    <result column="qyid" jdbcType="VARCHAR" property="qyid" />
    <result column="qymc" jdbcType="VARCHAR" property="qymc" />
    <result column="czr" jdbcType="VARCHAR" property="czr" />
    <result column="czsj" jdbcType="TIMESTAMP" property="czsj" />
    <result column="ryxm" jdbcType="VARCHAR" property="ryxm" />
    <result column="rybh" jdbcType="VARCHAR" property="rybh" />
    <result column="sjbq" jdbcType="TIMESTAMP" property="sjbq" />
    <result column="jrsj" jdbcType="TIMESTAMP" property="jrsj" />
    <result column="lksj" jdbcType="TIMESTAMP" property="lksj" />
    <result column="sfzh" jdbcType="VARCHAR" property="sfzh" />
    <result column="khdip" jdbcType="VARCHAR" property="khdip" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 09 13:31:05 CST 2023.
    -->
    delete from chas_yw_qysljcjl
    where id = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.wckj.chasstage.modules.qysljcjl.entity.ChasYwQysljcjl">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 09 13:31:05 CST 2023.
    -->
    insert into chas_yw_qysljcjl (id, isdel, data_flag, 
      lrr_sfzh, lrsj, xgr_sfzh, 
      xgsj, baqid, baqmc, 
      dwdm, dwxtbh, zt, rylx, 
      qylx, qyid, qymc, czr, 
      czsj, ryxm, rybh, 
      sjbq, jrsj, lksj, 
      sfzh, khdip)
    values (#{id,jdbcType=VARCHAR}, #{isdel,jdbcType=SMALLINT}, #{dataFlag,jdbcType=VARCHAR}, 
      #{lrrSfzh,jdbcType=VARCHAR}, #{lrsj,jdbcType=TIMESTAMP}, #{xgrSfzh,jdbcType=VARCHAR}, 
      #{xgsj,jdbcType=TIMESTAMP}, #{baqid,jdbcType=VARCHAR}, #{baqmc,jdbcType=VARCHAR}, 
      #{dwdm,jdbcType=VARCHAR}, #{dwxtbh,jdbcType=VARCHAR}, #{zt,jdbcType=VARCHAR}, #{rylx,jdbcType=VARCHAR}, 
      #{qylx,jdbcType=VARCHAR}, #{qyid,jdbcType=VARCHAR}, #{qymc,jdbcType=VARCHAR}, #{czr,jdbcType=VARCHAR}, 
      #{czsj,jdbcType=TIMESTAMP}, #{ryxm,jdbcType=VARCHAR}, #{rybh,jdbcType=VARCHAR}, 
      #{sjbq,jdbcType=TIMESTAMP}, #{jrsj,jdbcType=TIMESTAMP}, #{lksj,jdbcType=TIMESTAMP}, 
      #{sfzh,jdbcType=VARCHAR}, #{khdip,jdbcType=VARCHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.wckj.chasstage.modules.qysljcjl.entity.ChasYwQysljcjl">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 09 13:31:05 CST 2023.
    -->
    update chas_yw_qysljcjl
    set isdel = #{isdel,jdbcType=SMALLINT},
      data_flag = #{dataFlag,jdbcType=VARCHAR},
      lrr_sfzh = #{lrrSfzh,jdbcType=VARCHAR},
      lrsj = #{lrsj,jdbcType=TIMESTAMP},
      xgr_sfzh = #{xgrSfzh,jdbcType=VARCHAR},
      xgsj = #{xgsj,jdbcType=TIMESTAMP},
      baqid = #{baqid,jdbcType=VARCHAR},
      baqmc = #{baqmc,jdbcType=VARCHAR},
      dwdm = #{dwdm,jdbcType=VARCHAR},
      dwxtbh = #{dwxtbh,jdbcType=VARCHAR},
      zt = #{zt,jdbcType=VARCHAR},
      rylx = #{rylx,jdbcType=VARCHAR},
      qylx = #{qylx,jdbcType=VARCHAR},
      qyid = #{qyid,jdbcType=VARCHAR},
      qymc = #{qymc,jdbcType=VARCHAR},
      czr = #{czr,jdbcType=VARCHAR},
      czsj = #{czsj,jdbcType=TIMESTAMP},
      ryxm = #{ryxm,jdbcType=VARCHAR},
      rybh = #{rybh,jdbcType=VARCHAR},
      sjbq = #{sjbq,jdbcType=TIMESTAMP},
      jrsj = #{jrsj,jdbcType=TIMESTAMP},
      lksj = #{lksj,jdbcType=TIMESTAMP},
      sfzh = #{sfzh,jdbcType=VARCHAR},
      khdip = #{khdip,jdbcType=VARCHAR}
    where id = #{id,jdbcType=VARCHAR}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 09 13:31:05 CST 2023.
    -->
    select id, isdel, data_flag, lrr_sfzh, lrsj, xgr_sfzh, xgsj, baqid, baqmc, dwdm, 
    dwxtbh, zt, rylx, qylx, qyid, qymc, czr, czsj, ryxm, rybh, sjbq, jrsj, lksj, sfzh, 
    khdip
    from chas_yw_qysljcjl
    where id = #{id,jdbcType=VARCHAR}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 09 13:31:05 CST 2023.
    -->
    select id, isdel, data_flag, lrr_sfzh, lrsj, xgr_sfzh, xgsj, baqid, baqmc, dwdm, 
    dwxtbh, zt, rylx, qylx, qyid, qymc, czr, czsj, ryxm, rybh, sjbq, jrsj, lksj, sfzh, 
    khdip
    from chas_yw_qysljcjl where 1 = 1 and isdel = 0
    <if test="baqid !=null and baqid != ''">
      and baqid = '${baqid}'
    </if>
    <if test="qylx !=null and qylx != ''">
      and qylx = '${qylx}'
    </if>
    <if test="qyid != null and qyid != ''">
      and qyid = '${qyid}'
    </if>
    <if test="ryxm != null and ryxm != ''">
      and ryxm like '%${ryxm}%'
    </if>
    <if test="zt != null and zt != ''">
      and zt = '${zt}'
    </if>
    <if test="sfzh != null and sfzh != ''">
      and sfzh = '${sfzh}'
    </if>
    <if test="kssj1 != '' and kssj2 != '' and kssj1 != null and kssj2 != null">
      and jrsj &gt;= to_timestamp('${kssj1}','yyyy-MM-dd hh24:mi:ss') and jrsj &lt;= to_timestamp('${kssj2}','yyyy-MM-dd hh24:mi:ss')
    </if>
    <if test="gbsj1 != '' and gbsj2 != '' and gbsj1 != null and gbsj2 != null">
      and lksj &gt;= to_timestamp('${gbsj1}','yyyy-MM-dd hh24:mi:ss') and lksj &lt;= to_timestamp('${gbsj2}','yyyy-MM-dd hh24:mi:ss')
    </if>
    <if test="qxbs == 'province'">
      and DWXTBH LIKE CONCAT(left(#{orgSysCode,jdbcType=VARCHAR},2),'%')
    </if>
    <if test="qxbs == 'city'">
      and DWXTBH LIKE CONCAT(left(#{orgSysCode,jdbcType=VARCHAR},4),'%')
    </if>
    <if test="qxbs == 'reg'">
      and DWXTBH LIKE CONCAT(left(#{orgSysCode,jdbcType=VARCHAR},6),'%')
    </if>
    <if test="qxbs == 'org'">
      and DWXTBH LIKE CONCAT(left(#{orgSysCode,jdbcType=VARCHAR},8),'%')
    </if>
    <if test="qxbs == 'user'">
      and MJ_SFZH = #{idCard,jdbcType=VARCHAR}
    </if>
  </select>
  <select id="getEntityPageDataNew" resultType="java.util.Map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 09 13:31:05 CST 2023.
    -->
    select id, isdel, data_flag, lrr_sfzh, lrsj, xgr_sfzh, xgsj, baqid, baqmc, dwdm,
    dwxtbh, zt, rylx, qylx, qyid, qymc, czr, czsj, ryxm, rybh, sjbq, jrsj as kssj, lksj as gbsj, sfzh,
    khdip
    from chas_yw_qysljcjl where 1 = 1 and isdel = 0
    <if test="baqid !=null and baqid != ''">
      and baqid = '${baqid}'
    </if>
    <if test="qylx !=null and qylx != ''">
      and qylx = '${qylx}'
    </if>
    <if test="qyid != null and qyid != ''">
      and qyid = '${qyid}'
    </if>
    <if test="ryxm != null and ryxm != ''">
      and ryxm like '%${ryxm}%'
    </if>
    <if test="zt != null and zt != ''">
      and zt = '${zt}'
    </if>
    <if test="sfzh != null and sfzh != ''">
      and sfzh = '${sfzh}'
    </if>
    <if test="kssj1 != '' and kssj2 != '' and kssj1 != null and kssj2 != null">
      and jrsj &gt;= to_timestamp('${kssj1}','yyyy-MM-dd hh24:mi:ss') and jrsj &lt;= to_timestamp('${kssj2}','yyyy-MM-dd hh24:mi:ss')
    </if>
    <if test="gbsj1 != '' and gbsj2 != '' and gbsj1 != null and gbsj2 != null">
      and lksj &gt;= to_timestamp('${gbsj1}','yyyy-MM-dd hh24:mi:ss') and lksj &lt;= to_timestamp('${gbsj2}','yyyy-MM-dd hh24:mi:ss')
    </if>
    <if test="qxbs == 'province'">
      and DWXTBH LIKE CONCAT(left(#{orgSysCode,jdbcType=VARCHAR},2),'%')
    </if>
    <if test="qxbs == 'city'">
      and DWXTBH LIKE CONCAT(left(#{orgSysCode,jdbcType=VARCHAR},4),'%')
    </if>
    <if test="qxbs == 'reg'">
      and DWXTBH LIKE CONCAT(left(#{orgSysCode,jdbcType=VARCHAR},6),'%')
    </if>
    <if test="qxbs == 'org'">
      and DWXTBH LIKE CONCAT(left(#{orgSysCode,jdbcType=VARCHAR},8),'%')
    </if>
    <if test="qxbs == 'user'">
      and MJ_SFZH = #{idCard,jdbcType=VARCHAR}
    </if>
  </select>
  <update id="leaveRecordsBasedOnZoneId">
    update chas_yw_qysljcjl set zt = '02',lksj = now() where qyid = '${qyid}' and zt = '01' and isdel = 0
  </update>
</mapper>